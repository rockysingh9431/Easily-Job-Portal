
<div class="mt-5 header m-auto">
  <div class="container card mb-3">
    <div class="header-img">
      <a href="https://www.codingninjas.com/"><img src="https://files.codingninjas.com/web-banner-28759.png"
          class="card-img-top" alt="poster" /></a>
    </div>

    <div class="card-body">

      <h1 class="text-center text-success">
        <span class="text-danger">
          SDE opportunity in <%= job.location %> at</span>
        <span class="text-info">
          <%= job.companyname %>
        </span>
      </h1>

      <%if(user) {%>
        <div class="actions d-flex">
          <span style="width: 160px"
            class="bg-warning bg-opacity-100 border border-success border border-success p-1 border-opacity-50 rounded">
            Actively hiring<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
              class="bi bi-graph-up-arrow mx-2" viewBox="0 0 16 16">
              <path fill-rule="evenodd"
                d="M0 0h1v15h15v1H0V0Zm10 3.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0V4.9l-3.613 4.417a.5.5 0 0 1-.74.037L7.06 6.767l-3.656 5.027a.5.5 0 0 1-.808-.588l4-5.5a.5.5 0 0 1 .758-.06l2.609 2.61L13.445 4H10.5a.5.5 0 0 1-.5-.5Z">
              </path>
            </svg></span>
          <div class="action-right mx-2 px-2 mt-1">
            <a href="/job/update/<%-job.id%>" class="mx-2"><svg xmlns="http://www.w3.org/2000/svg" width="20"
                height="20" fill="currentColor" class="bi bi-pencil-square" viewBox="0 0 16 16">
                <path
                  d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z">
                </path>
                <path fill-rule="evenodd"
                  d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z">
                </path>
              </svg></a>
            <form action="/job/delete/<%- job.id %>" method="post" style="display:inline;" onsubmit="return confirmDelete()">
              <button type="submit" class="text-danger"
                style="background:none; border:none; padding:0; cursor:pointer;">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
                  class="bi bi-file-earmark-x" viewBox="0 0 16 16">
                  <path
                    d="M6.854 7.146a.5.5 0 1 0-.708.708L7.293 9l-1.147 1.146a.5.5 0 0 0 .708.708L8 9.707l1.146 1.147a.5.5 0 0 0 .708-.708L8.707 9l1.147-1.146a.5.5 0 0 0-.708-.708L8 8.293 6.854 7.146z">
                  </path>
                  <path
                    d="M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2zM9.5 3A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5v2z">
                  </path>
                </svg>
              </button>
            </form>

          </div>
        </div>
        <%}%>
          <div class="container d-flex justify-content-around my-5">
            <div class="left">
              <h5 class="my-1">
                <%= job.companyname %>
              </h5>
              <div>
                <span class="text-success">
                  <%= job.title %>
                </span>
              </div>

              <div class="d-flex flex-column p-2">
                <span>
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                    class="bi bi-geo-fill" viewBox="0 0 16 16">
                    <path fill-rule="evenodd"
                      d="M4 4a4 4 0 1 1 4.5 3.969V13.5a.5.5 0 0 1-1 0V7.97A4 4 0 0 1 4 3.999zm2.493 8.574a.5.5 0 0 1-.411.575c-.712.118-1.28.295-1.655.493a1.319 1.319 0 0 0-.37.265.301.301 0 0 0-.057.09V14l.002.008a.147.147 0 0 0 .016.033.617.617 0 0 0 .145.15c.165.13.435.27.813.395.751.25 1.82.414 3.024.414s2.273-.163 3.024-.414c.378-.126.648-.265.813-.395a.619.619 0 0 0 .146-.15.148.148 0 0 0 .015-.033L12 14v-.004a.301.301 0 0 0-.057-.09 1.318 1.318 0 0 0-.37-.264c-.376-.198-.943-.375-1.655-.493a.5.5 0 1 1 .164-.986c.77.127 1.452.328 1.957.594C12.5 13 13 13.4 13 14c0 .426-.26.752-.544.977-.29.228-.68.413-1.116.558-.878.293-2.059.465-3.34.465-1.281 0-2.462-.172-3.34-.465-.436-.145-.826-.33-1.116-.558C3.26 14.752 3 14.426 3 14c0-.599.5-1 .961-1.243.505-.266 1.187-.467 1.957-.594a.5.5 0 0 1 .575.411z">
                    </path>
                  </svg>
                  <%= job.location %>
                </span>
                <span>
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                    class="bi bi-currency-rupee" viewBox="0 0 16 16">
                    <path
                      d="M4 3.06h2.726c1.22 0 2.12.575 2.325 1.724H4v1.051h5.051C8.855 7.001 8 7.558 6.788 7.558H4v1.317L8.437 14h2.11L6.095 8.884h.855c2.316-.018 3.465-1.476 3.688-3.049H12V4.784h-1.345c-.08-.778-.357-1.335-.793-1.732H12V2H4v1.06Z">
                    </path>
                  </svg>
                  <%= job.salary %>
                </span>
                <span>
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                    class="bi bi-hourglass-split" viewBox="0 0 16 16">
                    <path
                      d="M2.5 15a.5.5 0 1 1 0-1h1v-1a4.5 4.5 0 0 1 2.557-4.06c.29-.139.443-.377.443-.59v-.7c0-.213-.154-.451-.443-.59A4.5 4.5 0 0 1 3.5 3V2h-1a.5.5 0 0 1 0-1h11a.5.5 0 0 1 0 1h-1v1a4.5 4.5 0 0 1-2.557 4.06c-.29.139-.443.377-.443.59v.7c0 .213.154.451.443.59A4.5 4.5 0 0 1 12.5 13v1h1a.5.5 0 0 1 0 1h-11zm2-13v1c0 .537.12 1.045.337 1.5h6.326c.216-.455.337-.963.337-1.5V2h-7zm3 6.35c0 .701-.478 1.236-1.011 1.492A3.5 3.5 0 0 0 4.5 13s.866-1.299 3-1.48V8.35zm1 0v3.17c2.134.181 3 1.48 3 1.48a3.5 3.5 0 0 0-1.989-3.158C8.978 9.586 8.5 9.052 8.5 8.351z">
                    </path>
                  </svg>
                  Apply By <%= job.applyby %>
                </span>
                <span>
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                    class="bi bi-bar-chart-fill" viewBox="0 0 16 16">
                    <path
                      d="M1 11a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1v-3zm5-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v7a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V7zm5-5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1V2z">
                    </path>
                  </svg>
                  Number of openings <%= job.numberofopenings %>
                </span>
                <a style="text-decoration: none; color: rgb(215, 20, 85)" href="applicants/<%= job.id %>">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                    class="bi bi-people-fill" viewBox="0 0 16 16">
                    <path
                      d="M7 14s-1 0-1-1 1-4 5-4 5 3 5 4-1 1-1 1H7Zm4-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6Zm-5.784 6A2.238 2.238 0 0 0 5.5 13c0-.598.15-1.166.427-1.659C4.239 11.298 3 11 3 11c-2 0-3 1-3 2s1 1 1 1h4.216ZM4 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z">
                    </path>
                  </svg>
                  Applicants: <%=job.applicants?.length%></a>
              </div>
            </div>

            <div class="right">
              <h4>Skills Required</h4>
              <div class="skills py-2">
                <% job?.skillsrequired.forEach(function(skill) { %>
                  <button class="btn btn-sm btn-outline-info">
                    <%= skill %>
                  </button>
                  <% }); %>
              </div>

              <div class="apply-modal">
                <!-- Job Application Modal -->
                 
                <div class="modal fade" id="jobApplicationModal" aria-hidden="true"
                  aria-labelledby="jobApplicationModalLabel" tabindex="-1">
                  <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h1 class="modal-title fs-5" id="jobApplicationModalLabel">Job Application</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                      </div>
                      <div class="modal-body">
                        <form id="jobApplicationForm" action="/apply" method="POST" enctype="multipart/form-data">
                          <input type="hidden" id="jobId" name="_id" value="<%-job.id%>" />
                          <div class="mb-3">
                            <label for="applicantName" class="form-label">Name</label>
                            <input type="text" class="form-control" id="applicantName" name="name" required>
                          </div>
                          <div class="mb-3">
                            <label for="applicantEmail" class="form-label">Email</label>
                            <input type="email" class="form-control" id="applicantEmail" name="email" required>
                          </div>
                          <div class="mb-3">
                            <label for="applicantContact" class="form-label">Contact Number</label>
                            <input type="tel" class="form-control" id="applicantContact" name="contact" required>
                          </div>
                          <div class="mb-3">
                            <label for="applicantResume" class="form-label">Resume</label>
                            <input type="file" class="form-control" id="applicantResume" name="resumePath" required>
                          </div>
                        </form>
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>

                        <!-- <a href="/job/<%=job.id%>"> -->
                          <button type="submit" form="jobApplicationForm" class="btn btn-primary">Submit
                          Application</button>
                        <!-- </a> -->
                      </div>
                    </div>
                  </div>

                </div>

                <button class=" apply-btn" data-bs-target="#jobApplicationModal" data-bs-toggle="modal">Apply
                  Now</button>
              </div>
              <div class="posted-time">Posted <%=(job.jobposted) %> ago</div>
            </div>
          </div>
    </div>
  </div>
</div>
</div>


<script>
  function confirmDelete() {
    return confirm('Are you sure you want to delete this job?');
  }
</script>














<!-- a ------------------------------------------------------------------>